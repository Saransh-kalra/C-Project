//MINI PROJECT//Name: Saransh Kalra//Date: 4/6/18//PURPOSE: To Write a C program that reads from a file and stores lists of names (the last name first) and ages in parallel arrays and sorts using quicksort the names into alphabetical order keeping the ages with the correct names, then writes the output to a file. Also, to compute the mean age of the data, the standard deviation of the data and the number of people in each age group (split into groups with 2 yrs. gap). //CODE//--------#include<stdio.h>#include<stdlib.h>#include<ctype.h>#include<string.h>#include<math.h>//function to quick sort the array of last names and swap the coresponding first name and age associated with thatvoid quickSort(char lname[67][30], char fname[67][30], int age[67], int left, int right){    int i, j;    //pointer for storing pivot    char *x;    //temporary variables for storing swap values of last name, first name and age respectively    char temp[30] ;    char temp1[30];    int temp_age = 0;    i = left;    j = right;    //let the pivot element be the last element    x = lname[right];    do{        //lefthand side item is compared with x i.e. the pivot till the element at index i is less than the element at right index        while((strcmp(lname[i],x) < 0) && (i < right)) {           i++;        }        //righthand side item is compared with x i.e. the pivot till the element at index j is greater than the element at left index        while((strcmp(lname[j],x) > 0) && (j > left)) {            j--;        }        //comapre i with j and if its less then swap teh values at those indexes in the arrays of first nae, last name and age        if(i <= j) {            strcpy(temp, lname[i]);            strcpy(lname[i], lname[j]);            strcpy(lname[j], temp);            strcpy(temp1, fname[i]);            strcpy(fname[i], fname[j]);            strcpy(fname[j], temp1);            temp_age=age[i];            age[i]=age[j];            age[j]=temp_age;            i++;            j--;        }    } while(i <= j);        //if left index is less than j then call quicksort from left to j        if(left < j) {            quickSort(lname,fname,age, left, j);        }        //if i index is less than right index then call quicksort from i to right index        if(i < right) {            quickSort(lname,fname,age, i, right);        }    }//function to call quicksort from main by taking just taking teh length of the arrayvoid quickSortMain(char lname[67][30],char fname[67][30], int age[67], int count2){    quickSort(lname,fname,age, 0, count2-1);}//function for calculating mean agedouble calc_mean_age(int age[], int length){    double mean_age;    int sum = 0;    //loop calculating the sum of all ages    for(int i=0; i<length; i++){        sum+=age[i];    }    //calculating mean by dividing the sum by the number of entities    mean_age = (double)sum/(length);    //return the mean to the program    return mean_age;}//function for calculating the standard deviationdouble calc_std_dev(int age[], int length){    double std_dev;    double sqr_sum = 0;    double mean_age;    mean_age = calc_mean_age(age,length);    //loop for calculating the square sum    for(int i=0; i<length; i++){        sqr_sum+=(mean_age-age[i])*(mean_age-age[i]);    }    //calculating standard deviation by taking the square root of the square sum divided by the number of people    std_dev = sqrt(sqr_sum/length);    //returning the standard deviation to the program    return std_dev;}//function for calculating teh number of people in age groups of 2yrsvoid age_grp_assign(int age[], int length){    //declaring counter variables for each age group    int age0_2 = 0;    int age3_5 = 0;    int age6_8 = 0;    int age9_11 = 0;    int age12_14 = 0;    int age15_17 = 0;    int age18_20 = 0;    int age21_23 = 0;    int age24_26 = 0;    int age27_29 = 0;    int age30_32 = 0;    int age33_35 = 0;    int age36_38 = 0;    int age39_41 = 0;    int age42_44 = 0;    int age45_47 = 0;    int age48_50 = 0;    int age51_53 = 0;    int age54_56 = 0;    int age57_59 = 0;    int age60_62 = 0;    int age63_65 = 0;    int age66_68 = 0;    int age69_71 = 0;    int age72_74 = 0;    int age75_77 = 0;    int age78_80 = 0;    int age81_83 = 0;    int age84_86 = 0;    int age87_89 = 0;    int age90_92 = 0;    int age93_95 = 0;    int age96_98 = 0;    int age99_100 = 0;    //loop for counting people in each age group    for(int i=0; i<length; i++){        if(age[i]==0||age[i]==1||age[i]==2){            age0_2++;        }        else if(age[i]==3||age[i]==4||age[i]==5){            age3_5++;        }        else if(age[i]==6||age[i]==7||age[i]==8){            age6_8++;        }        else if(age[i]==9||age[i]==10||age[i]==11){            age9_11++;        }        else if(age[i]==12||age[i]==13||age[i]==14){            age12_14++;        }        else if(age[i]==15||age[i]==16||age[i]==17){            age15_17++;        }        else if(age[i]==18||age[i]==19||age[i]==20){            age18_20++;        }        else if(age[i]==21||age[i]==22||age[i]==23){            age21_23++;        }        else if(age[i]==24||age[i]==25||age[i]==26){            age24_26++;        }        else if(age[i]==27||age[i]==28||age[i]==29){            age27_29++;        }        else if(age[i]==30||age[i]==31||age[i]==32){            age30_32++;        }        else if(age[i]==33||age[i]==34||age[i]==35){            age33_35++;        }        else if(age[i]==36||age[i]==37||age[i]==38){            age36_38++;        }        else if(age[i]==39||age[i]==40||age[i]==41){            age39_41++;        }        else if(age[i]==42||age[i]==43||age[i]==44){            age42_44++;        }        else if(age[i]==45||age[i]==46||age[i]==47){            age45_47++;        }        else if(age[i]==48||age[i]==49||age[i]==50){            age48_50++;        }        else if(age[i]==51||age[i]==52||age[i]==53){            age51_53++;        }        else if(age[i]==54||age[i]==55||age[i]==56){            age54_56++;        }        else if(age[i]==57||age[i]==58||age[i]==59){            age57_59++;        }        else if(age[i]==60||age[i]==61||age[i]==62){            age60_62++;        }        else if(age[i]==63||age[i]==64||age[i]==65){            age63_65++;        }        else if(age[i]==66||age[i]==67||age[i]==68){            age66_68++;        }        else if(age[i]==69||age[i]==70||age[i]==71){            age69_71++;        }        else if(age[i]==72||age[i]==73||age[i]==74){            age72_74++;        }        else if(age[i]==75||age[i]==76||age[i]==77){            age75_77++;        }        else if(age[i]==78||age[i]==79||age[i]==80){            age78_80++;        }        else if(age[i]==81||age[i]==82||age[i]==83){            age81_83++;        }        else if(age[i]==84||age[i]==85||age[i]==86){            age84_86++;        }        else if(age[i]==87||age[i]==88||age[i]==89){            age87_89++;        }        else if(age[i]==90||age[i]==91||age[i]==92){            age90_92++;        }        else if(age[i]==93||age[i]==94||age[i]==95){            age93_95++;        }        else if(age[i]==96||age[i]==97||age[i]==98){            age96_98++;        }        else if(age[i]==99||age[i]==100){            age99_100++;        }    }    //printing the assigned age group results on screen    printf("NUMBER OF PEOPLE IN AGE GROUP\n");    printf("0-2: %d\n",age0_2);    printf("3-5: %d\n",age3_5);    printf("6-8: %d\n",age6_8);    printf("9-11: %d\n",age9_11);    printf("12-14: %d\n",age12_14);    printf("15-17: %d\n",age15_17);    printf("18-20: %d\n",age18_20);    printf("21-23: %d\n",age21_23);    printf("24-26: %d\n",age24_26);    printf("27-29: %d\n",age27_29);    printf("30-32: %d\n",age30_32);    printf("33-35: %d\n",age33_35);    printf("36-38: %d\n",age36_38);    printf("39-41: %d\n",age39_41);    printf("42-44: %d\n",age42_44);    printf("45-47: %d\n",age45_47);    printf("48-50: %d\n",age48_50);    printf("51-53: %d\n",age51_53);    printf("54-56: %d\n",age54_56);    printf("57-59: %d\n",age57_59);    printf("60-62: %d\n",age60_62);    printf("63-65: %d\n",age63_65);    printf("66-68: %d\n",age66_68);    printf("69-71: %d\n",age69_71);    printf("72-74: %d\n",age72_74);    printf("75-77: %d\n",age75_77);    printf("78-80: %d\n",age78_80);    printf("81-83: %d\n",age81_83);    printf("84-86: %d\n",age84_86);    printf("87-89: %d\n",age87_89);    printf("90-92: %d\n",age90_92);    printf("93-95: %d\n",age93_95);    printf("96-98: %d\n",age96_98);    printf("99-100: %d\n",age99_100);}int main(){    char line[67][70]; //2d array to store the lines scanned from the file i.e. 67 lines of at max 70 characters length    char last_name[67][30]; //2d array to store last names of people    char first_name[67][30]; //2d array to store first and middle names of people    char header[70]; //array to store the file header line    char temp_age[67][3]; //character array to store the digits of the ages of people    int age[67]; //integer array to store the age sof people    int index1 = 0;//index to store the line number-1    int index2=0;//index to store the digits of age    int count1 =0;//counter for counting teh number of \t    int index_temp=0;//index to store the location of first \t    FILE *inp;//input file pointer    FILE *out;//output file pointer    //opening the output file "output.txt" in write mode    out = fopen("output.txt","w");    //loop for initialising the arrays of first and last names    for(int i = 0; i < 67; i++){            for(int k = 0; k < 30; k++)            {                last_name[i][k]='\0';                first_name[i][k]='\0';            }    }    //executing the program only if the pointer pointing to the file being read is not null i.e. i exists    if(( inp = fopen("inputData.txt","r" )) == NULL) {        printf("File could not be opened");    }    else{        //getting teh header line from the file and terminating the header line array        fgets(header,70,inp);        header[strlen(header)-1] = '\0';        //while the end of the file is not reached reading each line and storing it in the line array        while(!feof(inp)){            fgets(line[index1],70,inp);            line[index1][strlen(line[index1])] = '\0';            index1++;        }        //loop for splitting the line into last name, first and middle name, and age        for(int i = 0; i < 67; i++){                index_temp=0;                count1=0;                index2=0;            for(int k = 0; k<strlen(line[i]); k++)            {                if(line[i][k]=='\t'){                    count1++;                    //if first \t is encountered store the string before that as the last name in that row number(i)                    if(count1==1){                        strncpy(last_name[i],&line[i][0],k+1);                        //store the index where the first \t was encountered                        index_temp=k;                    }                    //if second \t is encountered store the string between first and second \t as the first and middle name of the person                    if(count1==2){                        strncpy(first_name[i],&line[i][index_temp+1],k-index_temp);                    }                }                //if any digit is encountered store that in the age array for that row number                else if(isdigit(line[i][k]) !=0){                    temp_age[i][index2]=line[i][k];                    index2++;                }            }            //terminate the arrays correctly            temp_age[i][index2] = '\0';            last_name[i][strlen(last_name[i])-1] = '\0';            first_name[i][strlen(first_name[i])-1] = '\0';        }        //loop for converting the digits to store number as age in an integer array        for(int i = 0; i < 67; i++){            //if there is just one dgit its a single digit number            if(strlen(temp_age[i])==1){                age[i] = (int) temp_age[i][0]-'0';            }            //if there are two digits, its a two dgit umber multiply first digit with 10 and add the secod digit to it to get the number            if(strlen(temp_age[i])==2){                age[i] = 10*((int) temp_age[i][0]-'0') +  (int)temp_age[i][1]-'0';            }        }        //MEAN        printf("The Mean Of The Ages Are: %.2lf\n", calc_mean_age(age,67));        //STD DEV        printf("The Standard Deviation Of The Ages Is: %.3lf\n", calc_std_dev(age,67));        //AGE GROUP ASSIGNMENT        age_grp_assign(age,67);        //QUICK SORTING THE ARRAY        quickSortMain(last_name,first_name,age,67);        //write the header to the new file        fprintf(out,"%s\n",header);        //write the new sorted data into the file        for(int i = 0; i < 67; i++){            fprintf(out,"%s\t%s\t%d\n",last_name[i],first_name[i],age[i]);        }    }    //closing the fies opened    fclose(inp);    fclose(out);    return 0;}